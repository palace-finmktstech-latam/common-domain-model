# CDM Trade JSON Output Files

This directory contains the JSON representation of our trade as we build it up incrementally through each step.

## Files Overview

### step1-minimal-trade.json (3.8KB)
**Generated by**: `MinimalTrade.java`  
**Contains**: 
- Basic trade structure with parties and dates
- Bank A and Goldman Sachs International parties
- Trade date: September 10, 2025  
- Empty product structure (no payouts yet)

### step2-with-fixed-leg.json (5.5KB)
**Generated by**: `TradeWithFixedLeg.java`  
**Contains**: 
- Everything from Step 1, plus:
- First interest rate payout (fixed leg)
- PayerReceiver structure (Bank A pays, Goldman Sachs receives)
- Empty rate specification (no actual rate yet)
- Basic product with EconomicTerms and single Payout

### step3-with-fixed-rate.json (8.4KB)
**Generated by**: `TradeWithFixedRate.java`  
**Contains**: 
- Everything from Step 2, plus:
- Complete fixed rate specification with 5% rate
- PriceSchedule → RateSchedule → FixedRateSpecification nesting
- Day count fraction: ACT/360
- Notional amount: CLP 950 billion
- ResolvablePriceQuantity with NonNegativeQuantitySchedule

### step4-with-floating-leg.json (14.8KB)
**Generated by**: `TradeWithFloatingLeg.java`  
**Contains**: 
- Everything from Step 3, plus:
- **Second interest rate payout (floating leg)**
- Complete FloatingRateSpecification with:
  - SOFR compound index (USD_SOFR_COMPOUND) 
  - Daily compounding (1D tenor)
  - 100 basis point spread (0.01)
- USD 10 million notional for floating leg
- Opposite payer/receiver (Goldman Sachs pays, Bank A receives)

### step5-cross-currency-elements.json (25KB)
**Generated by**: `CrossCurrencySwap.java`  
**Contains**: 
- Everything from Step 4, plus:
- **Business centers**: USNY (New York) + CLSA (Santiago)
- **Business day adjustments**: Modified Following convention
- **Calculation period dates** for both legs:
  - Effective date: September 15, 2025
  - Termination date: September 15, 2030 
  - Semi-annual frequency (6M periods)
  - Roll convention on 15th of month
- Full schedule structure visible in JSON

## Key JSON Observations

### Trade Growth Pattern
- **Step 1**: 3.7KB - Basic structure
- **Step 2**: 5.5KB - +1.8KB for interest rate payout framework  
- **Step 3**: 8.3KB - +2.8KB for rate specification + notional
- **Step 4**: 15KB - +6.7KB for second leg (nearly doubles)
- **Step 5**: 25KB - +10KB for schedules and business day adjustments

### JSON Structure Evolution
Each step adds more nested complexity in the `product.economicTerms.payout` array:

1. **Step 1**: Empty product
2. **Step 2**: Single payout with empty rateSpecification  
3. **Step 3**: Single payout with complete fixedRateSpecification
4. **Step 4**: Two payouts (fixed + floating) - full cross-currency swap
5. **Step 5**: Two payouts with complete calculation schedules

### Key CDM Patterns Visible
- **Choice fields**: Only one of `fixedRateSpecification`, `floatingRateSpecification`, or `inflationRateSpecification` populated
- **Reference wrappers**: `ReferenceWithMeta*` patterns for all object references
- **Type annotations**: Every object has `"type": "cdm.package.ClassName"`
- **Complete schemas**: All possible fields shown (even if null)

## Usage

View any file to see the exact JSON structure at that step:
```bash
# Pretty-print any step
cat step4-with-floating-leg.json | jq .

# Compare two steps to see what was added
diff step3-with-fixed-rate.json step4-with-floating-leg.json
```

## Next Steps

Future JSON files will be added as we continue building:
- **Step 5**: Cross-currency elements + FX observables
- **Step 6**: Business day adjustments + calculation schedules  
- **Step 7**: Payment dates + stub periods (if needed)

Each file represents a milestone in our CDM learning progression.